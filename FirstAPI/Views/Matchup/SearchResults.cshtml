@model IEnumerable<FirstAPI.Models.MatchupInfos>
@using CustomExtensions

@{
    var myResult = new List<FirstAPI.Models.MatchupInfos>();
    var automaticResults = (FirstAPI.Models.MatchupInfos)ViewBag.AutomaticResults;
    if (automaticResults.answers?.Count() > 0)
    {
        myResult.Add(automaticResults);
    }
}


<div id="automaticSearchResults">
    @if (myResult.Count() > 0)
    {
        @Html.Partial("AutomaticResults", (FirstAPI.Models.MatchupInfos)ViewBag.AutomaticResults)
    }
</div>

@if (Model.Count() > 0)
{
    <text>
        <fieldset class="panel panel-default" id="fieldsetAnswer" style="padding-bottom:10px;">
            <legend>Your Answers <small style="font-size:12px"> (Find in @ViewBag.CalculationTime secs)</small></legend>
    </text>

    <div class="row" style="margin-bottom: 10px">
        <div class="col-md-3 text-center">
            Ally Team
        </div>
        <div class="col-md-3 text-center">
            Ennemy Team
        </div>
        <div class="col-md-6 text-center">
            Best Answers
        </div>
    </div>
        <div class="row">
            <div class="col-md-3">
                <span class="col-md-2" style="margin-left:4px">
                    Top
                </span>
                <span class="col-md-2" style="margin-left:-6px">
                    Jungle
                </span>
                <span class="col-md-2 " style="margin-left: 9px;">
                    Mid
                </span>
                <span class="col-md-2 " style="margin-left: -2px;">
                    Adc
                </span>
                <span class="col-md-2 " style="margin-left: -11px;">
                    Support
                </span>
            </div>
            <div class="col-md-3">
                <span class="col-md-2" style="margin-left:5px">
                    Top
                </span>
                <span class="col-md-2" style="margin-left:-9px">
                    Jungle
                </span>
                <span class="col-md-2" style="margin-left: 11px;">
                    Mid
                </span>
                <span class="col-md-2" style="margin-left: -1px;">
                    Adc
                </span>
                <span class="col-md-2" style="margin-left: -10px;">
                    Support
                </span>
            </div>
            <div class="col-md-5 text-center">
                @*<div class="col-md-2 text-center">
                        Picks
                    </div>
                    <div class="col-md-2 text-center">
                        Comments
                    </div>*@
            </div>
        </div>
        <hr />
    foreach (var matchupInfos in Model)
    {
        <div class="row">
            <div class="col-md-3">
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.allyTopName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.allyTopName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.allyJungleName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.allyJungleName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.allyMidName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.allyMidName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.allyAdcName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.allyAdcName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.allySupportName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.allySupportName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
            </div>
            <div class="col-md-3">
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.ennemyTopName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.ennemyTopName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.ennemyJungleName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.ennemyJungleName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.ennemyMidName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.ennemyMidName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.ennemyAdcName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.ennemyAdcName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
                <div class="col-md-2">
                    @if (!string.IsNullOrEmpty(matchupInfos.ennemySupportName))
                    {
                        <text>
                            <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(matchupInfos.ennemySupportName).png" ; />
                        </text>
                    }
                    else
                    {
                        <text>
                            <span><i>N/A</i></span>
                        </text>
                    }
                </div>
            </div>
            <div class="col-md-5 text-center">
                @{
                    string champName;
                }
                @foreach (var answer in matchupInfos.answers)
                {
                    champName = ((List<FirstAPI.DbContext.Champion>
                        )Session["GlobalChampions"]).Where(x => x.ChampionId == answer.ChampionId).FirstOrDefault().ChampionName;
                    <text>
                        <div class="col-md-1">
                            @if (!String.IsNullOrEmpty(answer.Comments))
                            {
                                <img class="tooltipComment imgAnswer" id="tooltipComment-@(answer.MatchupCommentId)-@(answer.ChampionId)" data-id="@(answer.MatchupCommentId)-@(answer.ChampionId)" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(champName).png" ; />
                                <div id="commentId-@(answer.MatchupCommentId)-@(answer.ChampionId)" class="hidden">
                                    <div style="width:180px;">
                                        @Html.Raw(Html.Encode(answer.Comments).ReplaceLineBreakToBr())
                                    </div>
                                </div>
                            }
                            else
                            {
                                <img class="imgAnswer" src="http://ddragon.leagueoflegends.com/cdn/8.16.1/img/champion/@(champName).png" ; />
                            }
                        </div>
                    </text>
                }
            </div>
            <div class="col-md-1">
                <span style="cursor:pointer" onclick="editMatchup('@(matchupInfos.matchupId)')">Edit</span> |
                <span style="cursor:pointer" onclick="deleteMatchup('@(matchupInfos.matchupId)','@(matchupInfos.matchupResponseId)')">Delete</span>
            </div>
        </div>
        <hr />

                    }
                    }
                    else if (myResult.Count() == 0)
                    {
                        <div class="col-md-3">
                            No Results : <input type="button" value="Create New Answer" onclick="javascript: createNewMatchup();" />
                        </div>
                    }
